{
  "schemaName": "eap_workflow_contribution",
  "displayName": "Workflow Contribution",
  "pluralName": "Workflow Contributions",
  "description": "Agent contributions during collaborative workflows",
  "primaryColumn": "workflow_instance_id",
  "columns": [
    {
      "schemaName": "eap_workflow_contributionid",
      "displayName": "Workflow Contribution ID",
      "type": "Uniqueidentifier",
      "required": true,
      "isPrimaryKey": true
    },
    {
      "schemaName": "workflow_instance_id",
      "displayName": "Workflow Instance ID",
      "type": "Text",
      "maxLength": 50,
      "required": true,
      "description": "Workflow execution instance"
    },
    {
      "schemaName": "session_id",
      "displayName": "Session ID",
      "type": "Text",
      "maxLength": 50,
      "required": true,
      "description": "Parent session"
    },
    {
      "schemaName": "agent_code",
      "displayName": "Agent Code",
      "type": "Text",
      "maxLength": 10,
      "required": true,
      "description": "Contributing agent"
    },
    {
      "schemaName": "contribution_type",
      "displayName": "Contribution Type",
      "type": "Choice",
      "required": true,
      "options": ["analysis", "recommendation", "validation", "context"],
      "description": "Type of contribution"
    },
    {
      "schemaName": "contribution_json",
      "displayName": "Contribution JSON",
      "type": "MultilineText",
      "maxLength": 16000,
      "required": true,
      "description": "Full contribution content"
    },
    {
      "schemaName": "summary",
      "displayName": "Summary",
      "type": "MultilineText",
      "maxLength": 500,
      "required": false,
      "description": "Brief summary"
    },
    {
      "schemaName": "confidence_overall",
      "displayName": "Overall Confidence",
      "type": "WholeNumber",
      "required": false,
      "minValue": 0,
      "maxValue": 100,
      "description": "0-100 confidence"
    },
    {
      "schemaName": "status",
      "displayName": "Status",
      "type": "Choice",
      "required": true,
      "options": ["pending", "complete", "failed", "skipped"],
      "description": "Contribution status"
    },
    {
      "schemaName": "started_at",
      "displayName": "Started At",
      "type": "DateTime",
      "required": true,
      "description": "When dispatched"
    },
    {
      "schemaName": "completed_at",
      "displayName": "Completed At",
      "type": "DateTime",
      "required": false,
      "description": "When received"
    },
    {
      "schemaName": "error_message",
      "displayName": "Error Message",
      "type": "Text",
      "maxLength": 500,
      "required": false,
      "description": "If failed"
    }
  ],
  "indexes": [
    {
      "name": "idx_workflow_instance",
      "columns": ["workflow_instance_id"],
      "isUnique": false
    },
    {
      "name": "idx_workflow_agent",
      "columns": ["workflow_instance_id", "agent_code"],
      "isUnique": true
    },
    {
      "name": "idx_session_workflows",
      "columns": ["session_id"],
      "isUnique": false
    }
  ]
}
