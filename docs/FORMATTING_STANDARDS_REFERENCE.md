# FORMATTING STANDARDS REFERENCE
# Kessel Digital Agent Platform

**Version:** 1.0
**Created:** 2026-01-11
**Purpose:** Clarify formatting requirements for different document types

---

## OVERVIEW

The platform has TWO distinct formatting contexts with DIFFERENT requirements:

| Context | Purpose | Formatting |
|---------|---------|------------|
| **KB Files (Input)** | SharePoint/Copilot parsing | Plain text, 6-Rule Compliant |
| **Output Documents** | User deliverables | Rich formatting required |

---

## KB FILES (INPUT TO AGENT)

### What They Are
- Knowledge base documents uploaded to SharePoint
- Referenced by Copilot Studio during conversations
- Parsed by RAG system for retrieval

### Location
```
/release/v5.5/agents/*/base/kb/*.txt
```

### 6-RULE COMPLIANCE FRAMEWORK (REQUIRED)

| Rule | Requirement | Reason |
|------|-------------|--------|
| 1 | ALL-CAPS headers | Copilot parses uppercase as section markers |
| 2 | Simple lists (prose, not bullets) | Markdown bullets don't render in Copilot |
| 3 | Hyphens only (no em-dashes) | Unicode dashes cause parsing issues |
| 4 | ASCII only | Special characters break SharePoint indexing |
| 5 | No markdown tables | Pipe tables don't render, become unreadable |
| 6 | Mandatory language patterns | Consistent structure aids retrieval |

### Example: COMPLIANT KB Format
```
SECTION TITLE

This section covers the key concepts. The main points include first item,
second item, and third item. Each point is explained in prose format.

SUBSECTION

Additional details are provided here. When listing options, they are
written as: option A for scenario one, option B for scenario two, and
option C for scenario three.
```

### Example: NON-COMPLIANT (Do Not Use in KB)
```
# Section Title          ← Markdown header
- First item             ← Bullet point
- Second item            ← Bullet point

| Column 1 | Column 2 |  ← Markdown table
|----------|----------|
| Data     | Data     |
```

### Character Limits
- **Copilot Instructions:** 8,000 characters maximum
- **KB Documents:** 36,000 characters maximum (split if larger)
- **SharePoint Upload:** 7MB / 20 pages / 15K words maximum

---

## OUTPUT DOCUMENTS (GENERATED BY AGENT)

### What They Are
- Documents generated FOR users as deliverables
- Media plans, analysis reports, recommendations
- Exported as Word, PDF, PowerPoint, Excel

### Formatting Requirements

**Rich formatting is REQUIRED for professional output:**

- ✅ Headers and subheaders (H1, H2, H3)
- ✅ Bold and italic emphasis
- ✅ Bullet points and numbered lists
- ✅ Tables for data presentation
- ✅ Charts and graphs where appropriate
- ✅ Professional styling and branding
- ✅ Page breaks and sections
- ✅ Table of contents for long documents

### Example: Proper Output Document
```
# Media Plan Summary

## Executive Overview

The recommended media investment of **$500,000** is allocated across
three primary channels to achieve the stated objectives.

## Channel Allocation

| Channel | Budget | Percentage | Role |
|---------|--------|------------|------|
| Paid Search | $200,000 | 40% | Lower funnel conversion |
| Social Media | $175,000 | 35% | Mid funnel consideration |
| Display | $125,000 | 25% | Upper funnel awareness |

## Key Recommendations

1. **Prioritize search** during Q1 for immediate conversions
2. **Scale social** in Q2 as awareness builds
3. **Test CTV** with $25,000 reserve budget
```

### Output Templates

The file `Output_Templates_v5_5.txt` in MPA KB contains markdown tables
INTENTIONALLY - it defines the output format specifications that agents
should use when generating user deliverables. This is the one exception
where tables appear in the KB directory.

---

## QUICK REFERENCE

### When Creating KB Files
```
Ask: "Will Copilot Studio parse this?"
→ YES: Use 6-Rule Compliant plain text
→ Applies to: All files in /agents/*/base/kb/
```

### When Generating Outputs
```
Ask: "Will a user read this as a deliverable?"
→ YES: Use rich formatting, tables, professional styling
→ Applies to: Word docs, PDFs, PowerPoints, exported reports
```

---

## FILE IDENTIFICATION

### 6-Rule Compliant (Plain Text)
- `KB_*.txt` - Knowledge base content
- `FRAMEWORK_*.txt` - Framework definitions
- `REFERENCE_*.txt` - Reference data
- `REGISTRY_*.txt` - Registry data
- `BEHAVIORAL_*.txt` - Behavioral rules
- `*_Copilot_Instructions_*.txt` - Agent instructions

### Rich Formatting (Output Templates)
- `Output_Templates_*.txt` - Defines output formats (exception)
- Generated `.docx` files
- Generated `.pdf` files
- Generated `.pptx` files
- Generated `.xlsx` files

---

## VALIDATION

### Check KB Compliance
```bash
# Find markdown tables (should return empty for KB files)
grep -rE '^\|' release/v5.5/agents/*/base/kb/*.txt

# Find markdown headers (should return empty)
grep -rE '^#{1,6} ' release/v5.5/agents/*/base/kb/*.txt

# Check character counts
wc -c release/v5.5/agents/*/base/kb/*.txt
```

### Exceptions
- `Output_Templates_*.txt` - Tables allowed (defines output formats)

---

## CHANGE LOG

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | 2026-01-11 | Initial creation after Phase 9 audit |

---

## END OF DOCUMENT
