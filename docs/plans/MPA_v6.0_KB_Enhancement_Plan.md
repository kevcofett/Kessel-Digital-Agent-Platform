# MPA v6.0 KB Enhancement Plan
## Deep Analysis Capabilities Expansion
### Date: January 18, 2026

---

## EXECUTIVE SUMMARY

This plan identifies 32 new KB files across all agents to dramatically enhance analytical depth, financial rigor, and strategic sophistication. Priority focus on AUD, SPO, and financial analysis capabilities.

**Current State:** 72 KB documents
**Proposed Additions:** 32 new KB files
**Target State:** 104 KB documents

---

## SECTION 1 - AUD AGENT ENHANCEMENTS

### Current Inventory (10 files)
- Cluster Analysis, Contextual Targeting, First Party Data
- Identity Resolution, LTV Models, Lookalike Strategy
- Privacy Compliance, Propensity Models, Segmentation Methods, Targeting Strategy

### Gap Analysis

| Capability Gap | Business Impact | Priority |
|----------------|-----------------|----------|
| RFM Analysis | Customer value segmentation missing | HIGH |
| Churn Prediction | Retention optimization gaps | HIGH |
| Cohort Analysis | Lifecycle understanding limited | HIGH |
| Zero-Party Data | Consent-based data strategies weak | MEDIUM |
| Audience Overlap | Cross-platform inefficiency undetected | MEDIUM |
| Intent Signals | Purchase readiness scoring missing | HIGH |

### Proposed New KB Files (6 files)

#### AUD_KB_RFM_Analysis_v1.txt
```
PURPOSE: Recency-Frequency-Monetary segmentation framework
CONTENT:
- RFM scoring methodology (1-5 scale per dimension)
- Customer tier definitions (Champions, Loyal, At-Risk, etc.)
- Reactivation strategies by segment
- Campaign targeting by RFM tier
- Integration with CRM and CDP platforms
- Benchmark response rates by segment
- Cross-sell and upsell prioritization
```

#### AUD_KB_Churn_Prediction_v1.txt
```
PURPOSE: Customer attrition modeling and prevention
CONTENT:
- Churn indicator signals (behavioral, transactional, engagement)
- Predictive model approaches (logistic regression, random forest, survival analysis)
- Churn score thresholds and intervention triggers
- Win-back campaign timing and offers
- Customer health scoring frameworks
- Early warning systems
- Retention ROI calculations
```

#### AUD_KB_Cohort_Analysis_v1.txt
```
PURPOSE: Lifecycle and acquisition cohort performance tracking
CONTENT:
- Cohort definition methodologies (acquisition date, first purchase, channel)
- Retention curve analysis
- LTV by cohort calculations
- Payback period analysis
- Cohort quality scoring
- Seasonal cohort adjustments
- Platform-specific cohort tools
```

#### AUD_KB_Zero_Party_Data_v1.txt
```
PURPOSE: Consent-based preference data strategies
CONTENT:
- Zero-party vs first-party distinction
- Collection mechanisms (surveys, preference centers, quizzes)
- Progressive profiling strategies
- Preference data activation
- Privacy-first personalization
- Value exchange frameworks
- Trust building approaches
```

#### AUD_KB_Audience_Overlap_v1.txt
```
PURPOSE: Cross-platform audience deduplication and efficiency
CONTENT:
- Overlap analysis methodologies
- Platform-specific overlap tools (Meta, Google, TTD)
- Frequency management across platforms
- Unified reach estimation
- Budget waste from overlap
- Sequential messaging across platforms
- Suppression list strategies
```

#### AUD_KB_Intent_Signals_v1.txt
```
PURPOSE: Purchase intent scoring and activation
CONTENT:
- Intent signal hierarchy (explicit vs implicit)
- In-market audience definitions by platform
- Custom intent audience creation
- Intent decay modeling
- Real-time intent activation
- Intent-based bidding strategies
- B2B intent data providers (Bombora, G2, 6sense)
```

---

## SECTION 2 - SPO AGENT ENHANCEMENTS

### Current Inventory (7 files)
- Auction Dynamics, Brand Safety, Carbon Measurement
- Fee Analysis, NBI Calculation, Partner Evaluation, Sustainability

### Gap Analysis

| Capability Gap | Business Impact | Priority |
|----------------|-----------------|----------|
| Margin Analysis | Profitability optimization missing | HIGH |
| Working Media Ratio | Investment efficiency unclear | HIGH |
| Bid Landscape | Competitive bidding intelligence weak | MEDIUM |
| Hidden Fee Detection | Cost leakage unidentified | HIGH |
| Header Bidding | SSP optimization limited | MEDIUM |
| Cost Benchmarks | Vertical-specific guidance missing | HIGH |

### Proposed New KB Files (6 files)

#### SPO_KB_Margin_Analysis_v1.txt
```
PURPOSE: Advertising margin and profitability optimization
CONTENT:
- Gross margin calculation by channel
- Net margin after all fees
- Margin erosion analysis
- Break-even ROAS by margin tier
- Product-level profitability
- Promotional margin impact
- Contribution margin optimization
- Category margin benchmarks
```

#### SPO_KB_Working_Media_v1.txt
```
PURPOSE: Working vs non-working media optimization
CONTENT:
- Working media ratio calculation
- Industry benchmarks (65-85% target)
- Fee categorization framework
- Tech tax analysis
- Data cost allocation
- Production cost efficiency
- Vendor consolidation strategies
- Agency fee structures
```

#### SPO_KB_Bid_Landscape_v1.txt
```
PURPOSE: Competitive bidding intelligence and optimization
CONTENT:
- Auction density analysis
- Win rate optimization
- Bid shading effectiveness
- Floor price detection
- Competitive CPM analysis
- Bid landscape by daypart
- Seasonal bidding patterns
- Strategic bid adjustments
```

#### SPO_KB_Hidden_Fees_v1.txt
```
PURPOSE: Fee transparency and hidden cost detection
CONTENT:
- Common hidden fee types
- Platform fee disclosure requirements
- Data fee layering
- Verification cost stacking
- Ad serving fee structures
- Exchange take rate analysis
- Contract clause review checklist
- Fee audit methodology
```

#### SPO_KB_Header_Bidding_v1.txt
```
PURPOSE: Prebid and header bidding optimization
CONTENT:
- Header bidding mechanics
- Prebid.js configuration
- SSP prioritization strategies
- Timeout optimization
- Wrapper technology comparison
- Server-side vs client-side
- Revenue optimization tactics
- Publisher relationship leverage
```

#### SPO_KB_Cost_Benchmarks_v1.txt
```
PURPOSE: Vertical and channel-specific cost benchmarks
CONTENT:
- CPM benchmarks by vertical (2025-2026 data)
- CPC benchmarks by industry
- Seasonal cost indices
- Geographic cost variations
- Device cost differentials
- Format cost comparisons
- Quality-adjusted cost metrics
- Benchmark update methodology
```

---

## SECTION 3 - FINANCIAL ANALYSIS ENHANCEMENTS

### Spans ANL Agent Primarily, Plus SPO and PRF

### Current ANL Inventory (8 files)
- Analytics Engine, Causal Inference, Forecasting Methods
- Incrementality Methods, MMM Advanced, Projection Methods
- Scenario Modeling, Statistical Tests

### Gap Analysis

| Capability Gap | Business Impact | Priority |
|----------------|-----------------|----------|
| P&L Impact Modeling | CFO-level reporting missing | CRITICAL |
| Customer Economics | CAC payback unclear | HIGH |
| Budget Elasticity | Diminishing returns unmodeled | HIGH |
| Portfolio Theory | Risk diversification missing | MEDIUM |
| Monte Carlo | Uncertainty quantification weak | HIGH |
| Break-Even Analysis | Investment thresholds undefined | HIGH |

### Proposed New KB Files (8 files)

#### ANL_KB_PL_Impact_Modeling_v1.txt
```
PURPOSE: Marketing contribution to P&L and financial statements
CONTENT:
- Marketing-attributed revenue calculation
- Cost of sales allocation
- Marketing expense classification (OPEX vs CAPEX)
- Contribution margin by channel
- Marketing P&L template
- CFO reporting frameworks
- Financial statement impact
- Audit trail requirements
```

#### ANL_KB_Customer_Economics_v1.txt
```
PURPOSE: Customer acquisition and lifetime value economics
CONTENT:
- CAC calculation (blended and channel-specific)
- CAC payback period analysis
- LTV:CAC ratio benchmarks (3:1 minimum, 5:1 target)
- Customer profitability segments
- Unit economics by cohort
- Payback curve modeling
- CAC trend analysis
- Investment efficiency thresholds
```

#### ANL_KB_Budget_Elasticity_v1.txt
```
PURPOSE: Diminishing returns and budget response curves
CONTENT:
- Elasticity coefficient calculation
- Saturation point identification
- Marginal ROAS curves
- Optimal budget ranges by channel
- Diminishing returns thresholds
- Budget reallocation triggers
- Elasticity by audience segment
- Seasonal elasticity variations
```

#### ANL_KB_Portfolio_Theory_v1.txt
```
PURPOSE: Media portfolio optimization and risk management
CONTENT:
- Markowitz portfolio theory for media
- Channel correlation analysis
- Risk-adjusted return metrics
- Diversification benefits
- Efficient frontier construction
- Volatility measurement
- Beta coefficients for channels
- Portfolio rebalancing triggers
```

#### ANL_KB_Monte_Carlo_v1.txt
```
PURPOSE: Probabilistic forecasting and uncertainty quantification
CONTENT:
- Monte Carlo simulation methodology
- Input distribution selection
- Iteration count guidance
- Confidence interval generation
- Scenario probability weighting
- Risk quantification
- Sensitivity analysis integration
- Presentation of uncertainty ranges
```

#### ANL_KB_Break_Even_v1.txt
```
PURPOSE: Investment threshold and profitability analysis
CONTENT:
- Break-even ROAS calculation
- Break-even volume analysis
- Contribution margin thresholds
- Fixed vs variable cost allocation
- Time to break-even modeling
- Scenario break-even comparison
- Investment hurdle rates
- Go/no-go decision frameworks
```

#### ANL_KB_Sensitivity_Analysis_v1.txt
```
PURPOSE: Key driver identification and risk assessment
CONTENT:
- One-way sensitivity analysis
- Multi-way sensitivity (tornado diagrams)
- Threshold identification
- Critical assumption testing
- Scenario stress testing
- Input uncertainty ranges
- Driver prioritization
- Decision tree integration
```

#### ANL_KB_Marketing_Finance_Integration_v1.txt
```
PURPOSE: Bridge between marketing metrics and financial reporting
CONTENT:
- Metric translation (marketing to finance)
- Reporting cadence alignment
- Budget vs actual variance analysis
- Rolling forecast methodology
- Marketing ROI for finance audiences
- Investment case frameworks
- CFO dashboard requirements
- Board presentation guidelines
```

---

## SECTION 4 - OTHER AGENT ENHANCEMENTS

### CHA Agent (Channel) - 2 New Files

#### CHA_KB_Retail_Media_Networks_v1.txt
```
PURPOSE: Amazon, Walmart, Target and retail media planning
CONTENT:
- RMN ecosystem overview
- Platform-specific capabilities
- Search vs display vs video on retail
- Audience targeting on RMNs
- Attribution and measurement
- New-to-brand metrics
- AMC and clean room integration
- Cross-retailer strategy
```

#### CHA_KB_CTV_Planning_v1.txt
```
PURPOSE: Connected TV and streaming advertising deep dive
CONTENT:
- CTV inventory landscape
- Programmatic vs direct CTV buying
- Frequency management in CTV
- Household vs individual targeting
- ACR data and measurement
- CTV attribution approaches
- Premium vs AVOD inventory
- Cross-screen planning
```

### PRF Agent (Performance) - 3 New Files

#### PRF_KB_Unified_Measurement_v1.txt
```
PURPOSE: Multi-methodology measurement integration
CONTENT:
- MTA + MMM + incrementality integration
- Methodology selection by objective
- Cross-methodology calibration
- Unified measurement frameworks
- Single source of truth approaches
- Methodology trade-offs
- Measurement roadmap development
- Vendor evaluation criteria
```

#### PRF_KB_Cross_Platform_Dedup_v1.txt
```
PURPOSE: Cross-platform reach and conversion deduplication
CONTENT:
- Deduplication methodologies
- Identity graph integration
- Panel-based deduplication
- Platform-reported vs deduplicated metrics
- Reach curve modeling
- Conversion path deduplication
- Data clean room approaches
- Accuracy benchmarks
```

#### PRF_KB_Test_Design_Playbooks_v1.txt
```
PURPOSE: Incrementality and lift test design frameworks
CONTENT:
- Geo test design (synthetic control, matched markets)
- Holdout test design
- Sample size calculations
- Test duration requirements
- Power analysis
- Contamination prevention
- Results interpretation
- Action framework from results
```

### DOC Agent (Document) - 3 New Files

#### DOC_KB_Financial_Templates_v1.txt
```
PURPOSE: Finance-focused reporting templates
CONTENT:
- Marketing P&L template
- Investment case template
- Budget variance report
- ROI summary formats
- Cash flow impact templates
- CFO briefing formats
- Board presentation structure
- Quarterly business review template
```

#### DOC_KB_Investment_Case_v1.txt
```
PURPOSE: Business case and investment proposal frameworks
CONTENT:
- Investment case structure
- NPV and IRR calculations
- Sensitivity presentation
- Risk assessment sections
- Scenario comparison tables
- Executive summary guidelines
- Appendix requirements
- Approval workflow integration
```

#### DOC_KB_Data_Storytelling_v1.txt
```
PURPOSE: Narrative construction from data analysis
CONTENT:
- Data story structure (situation, complication, resolution)
- Insight hierarchy (so what, now what)
- Chart selection guidance
- Annotation best practices
- Executive vs analyst versions
- Action-oriented conclusions
- Avoiding data dumping
- Persuasive data presentation
```

### ORC Agent (Orchestrator) - 2 New Files

#### ORC_KB_Complex_Query_Decomposition_v1.txt
```
PURPOSE: Multi-step reasoning and query breakdown
CONTENT:
- Query complexity classification
- Decomposition strategies
- Agent sequencing logic
- Parallel vs sequential routing
- Dependency identification
- Result synthesis approaches
- Clarification triggers
- Handoff optimization
```

#### ORC_KB_Multi_Turn_Reasoning_v1.txt
```
PURPOSE: Extended conversation and reasoning chains
CONTENT:
- Context accumulation strategies
- Memory management across turns
- Hypothesis tracking
- Progressive refinement patterns
- Contradiction handling
- User intent evolution
- Session state optimization
- Complex workflow management
```

---

## SECTION 5 - IMPLEMENTATION PLAN

### Phase 1: Financial Analysis Foundation (Week 1)
**Priority: CRITICAL**

| File | Agent | Est. Characters |
|------|-------|-----------------|
| ANL_KB_PL_Impact_Modeling_v1.txt | ANL | 12,000 |
| ANL_KB_Customer_Economics_v1.txt | ANL | 11,000 |
| ANL_KB_Break_Even_v1.txt | ANL | 10,000 |
| ANL_KB_Marketing_Finance_Integration_v1.txt | ANL | 11,000 |

**Deliverable:** CFO-ready financial analysis capabilities

### Phase 2: AUD Deep Analytics (Week 1-2)
**Priority: HIGH**

| File | Agent | Est. Characters |
|------|-------|-----------------|
| AUD_KB_RFM_Analysis_v1.txt | AUD | 12,000 |
| AUD_KB_Churn_Prediction_v1.txt | AUD | 11,000 |
| AUD_KB_Cohort_Analysis_v1.txt | AUD | 10,000 |
| AUD_KB_Intent_Signals_v1.txt | AUD | 10,000 |

**Deliverable:** Customer lifecycle analytics capabilities

### Phase 3: SPO Optimization (Week 2)
**Priority: HIGH**

| File | Agent | Est. Characters |
|------|-------|-----------------|
| SPO_KB_Margin_Analysis_v1.txt | SPO | 11,000 |
| SPO_KB_Working_Media_v1.txt | SPO | 10,000 |
| SPO_KB_Hidden_Fees_v1.txt | SPO | 9,000 |
| SPO_KB_Cost_Benchmarks_v1.txt | SPO | 12,000 |

**Deliverable:** Profitability optimization capabilities

### Phase 4: Advanced Analytics (Week 2-3)
**Priority: HIGH**

| File | Agent | Est. Characters |
|------|-------|-----------------|
| ANL_KB_Budget_Elasticity_v1.txt | ANL | 11,000 |
| ANL_KB_Monte_Carlo_v1.txt | ANL | 10,000 |
| ANL_KB_Sensitivity_Analysis_v1.txt | ANL | 10,000 |
| ANL_KB_Portfolio_Theory_v1.txt | ANL | 11,000 |

**Deliverable:** Sophisticated forecasting and risk analysis

### Phase 5: Supporting Capabilities (Week 3)
**Priority: MEDIUM**

| File | Agent | Est. Characters |
|------|-------|-----------------|
| AUD_KB_Zero_Party_Data_v1.txt | AUD | 9,000 |
| AUD_KB_Audience_Overlap_v1.txt | AUD | 10,000 |
| SPO_KB_Bid_Landscape_v1.txt | SPO | 10,000 |
| SPO_KB_Header_Bidding_v1.txt | SPO | 10,000 |

### Phase 6: Channel and Measurement (Week 3-4)
**Priority: MEDIUM**

| File | Agent | Est. Characters |
|------|-------|-----------------|
| CHA_KB_Retail_Media_Networks_v1.txt | CHA | 12,000 |
| CHA_KB_CTV_Planning_v1.txt | CHA | 11,000 |
| PRF_KB_Unified_Measurement_v1.txt | PRF | 11,000 |
| PRF_KB_Cross_Platform_Dedup_v1.txt | PRF | 10,000 |
| PRF_KB_Test_Design_Playbooks_v1.txt | PRF | 11,000 |

### Phase 7: Documentation and Orchestration (Week 4)
**Priority: MEDIUM**

| File | Agent | Est. Characters |
|------|-------|-----------------|
| DOC_KB_Financial_Templates_v1.txt | DOC | 10,000 |
| DOC_KB_Investment_Case_v1.txt | DOC | 9,000 |
| DOC_KB_Data_Storytelling_v1.txt | DOC | 10,000 |
| ORC_KB_Complex_Query_Decomposition_v1.txt | ORC | 9,000 |
| ORC_KB_Multi_Turn_Reasoning_v1.txt | ORC | 9,000 |

---

## SECTION 6 - SEED DATA ENHANCEMENTS

### mpa_benchmark_seed_v6.csv Updates
Add financial benchmarks:
- LTV:CAC ratio by vertical (target 3:1 to 5:1)
- CAC payback periods by industry
- Working media ratios by channel
- Break-even ROAS by margin tier
- Marketing expense ratios by sector

### mpa_kpi_seed_v6.csv Additions
New KPIs to add:
- CONTRIBUTION_MARGIN: (Revenue - Variable Costs) / Revenue
- CAC_PAYBACK: CAC / (Monthly Revenue per Customer * Gross Margin)
- WORKING_MEDIA_RATIO: Working Media / Total Media Spend
- MARGINAL_ROAS: Delta Revenue / Delta Spend
- PORTFOLIO_VOLATILITY: Std Dev of Channel Returns

---

## SECTION 7 - SUCCESS METRICS

### Capability Coverage
- Current: 72 KB files covering ~85% of common queries
- Target: 104 KB files covering ~95% of common queries

### Financial Analysis Depth
- Current: Basic ROAS and CPA guidance
- Target: Full P&L impact, customer economics, investment case support

### Query Resolution Rate
- Current: ~70% queries resolved without fallback
- Target: ~90% queries resolved with enhanced KB

### CFO/Finance Audience Readiness
- Current: Marketing-focused outputs
- Target: Finance-ready frameworks and templates

---

## APPENDIX - FILE SUMMARY BY AGENT

| Agent | Current | Proposed | Total |
|-------|---------|----------|-------|
| ANL | 8 | 8 | 16 |
| AUD | 10 | 6 | 16 |
| CHA | 10 | 2 | 12 |
| DOC | 5 | 3 | 8 |
| ORC | 4 | 2 | 6 |
| PRF | 9 | 3 | 12 |
| SPO | 7 | 6 | 13 |
| Shared | 2 | 0 | 2 |
| Verticals | 12 | 0 | 12 |
| **TOTAL** | **72** | **32** | **104** |

---

## NEXT STEPS

1. **Review and prioritize** - Confirm Phase 1-2 priorities align with business needs
2. **Begin Phase 1** - Create 4 financial analysis KB files
3. **Validate with test queries** - Ensure new KB improves response quality
4. **Update agent instructions** - Reference new KB capabilities
5. **Update seed data** - Add new benchmarks and KPIs

---

*Document generated: January 18, 2026*
*Author: Claude (MPA Development Assistant)*
