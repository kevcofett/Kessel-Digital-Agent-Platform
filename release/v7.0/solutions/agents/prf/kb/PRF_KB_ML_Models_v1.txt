PRF ML MODELS KNOWLEDGE BASE
VERSION 1.0
LAST UPDATED JANUARY 2026

---

OVERVIEW

This document describes the machine learning models available to the Performance Agent for anomaly detection, attribution modeling, and performance forecasting.

---

AVAILABLE ML MODELS

ANOMALY DETECTION MODEL
- Endpoint: kdap-anomaly-detector
- Purpose: Identify unusual patterns in performance metrics
- Model Type: Isolation Forest
- Input Features: Impressions, clicks, conversions, spend, CTR, CVR, CPC, CPA, ROAS
- Output: Anomaly score (-1 to 1), anomaly flag, contributing factors
- When to Use: Daily performance monitoring, campaign health checks
- Fallback: Use statistical threshold detection

SHAPLEY ATTRIBUTION MODEL
- Endpoint: kdap-attribution
- Purpose: Calculate fair credit attribution across touchpoints
- Model Type: SHAP with LightGBM base model
- Input Features: Touchpoint sequences, conversion outcomes, time delays
- Output: Shapley values per touchpoint, confidence intervals
- When to Use: Multi-touch attribution analysis, channel valuation
- Fallback: Use position-based or time-decay heuristics

PERFORMANCE FORECASTING MODEL
- Endpoint: kdap-forecasting
- Purpose: Predict future performance metrics
- Model Type: Prophet with external regressors
- Input Features: Historical metrics, seasonality indicators, planned spend, external factors
- Output: Point forecasts, prediction intervals, trend decomposition
- When to Use: Budget planning, goal setting, pacing optimization
- Fallback: Use moving average projections

---

CALLING ML MODELS

The capability dispatcher automatically routes to ML endpoints when available. To explicitly request ML-powered calculations, include in your request:

- use_ml: true
- confidence_required: high

---

MODEL ACCURACY BENCHMARKS

ANOMALY DETECTOR
- Precision: 0.78
- Recall: 0.85
- F1 Score: 0.81
- False positive rate: 3.2%

ATTRIBUTION MODEL
- Holdout validation RMSE: 0.12
- Coefficient stability: 94%
- Cross-validation correlation: 0.91

FORECASTING MODEL
- MAPE (7-day): 8.3%
- MAPE (30-day): 12.7%
- Coverage (95% CI): 93.8%

---

INTEGRATION WITH PRF CAPABILITIES

PRF_DETECT_ANOMALIES
- Primary: kdap-anomaly-detector ML endpoint
- Fallback: PRF_ANOMALY_PROMPT AI Builder

PRF_CALCULATE_ATTRIBUTION
- Primary: kdap-attribution ML endpoint
- Fallback: PRF_ATTRIBUTION_PROMPT AI Builder

PRF_FORECAST_PERFORMANCE
- Primary: kdap-forecasting ML endpoint
- Fallback: PRF_FORECAST_PROMPT AI Builder

---

ANOMALY DETECTION THRESHOLDS

SEVERITY LEVELS
- Critical: Anomaly score less than -0.8
- High: Anomaly score between -0.8 and -0.6
- Medium: Anomaly score between -0.6 and -0.4
- Low: Anomaly score between -0.4 and -0.2

RECOMMENDED ACTIONS BY SEVERITY
- Critical: Immediate investigation required, potential data issue or major incident
- High: Review within 4 hours, likely significant performance change
- Medium: Review within 24 hours, may be normal variation
- Low: Monitor, no immediate action needed

---

ATTRIBUTION MODEL CONSIDERATIONS

LOOKBACK WINDOWS
- Standard: 30 days
- Short-cycle products: 7 days
- Long-cycle products: 90 days

TOUCHPOINT WEIGHTING
- Model automatically learns optimal weights
- Override available for known business rules
- Minimum 1000 conversions for reliable estimates

---

DATA REQUIREMENTS

MINIMUM DATA VOLUME
- Anomaly detection: 90 days historical data
- Attribution: 1000+ converting paths
- Forecasting: 52+ weeks for seasonality capture

DATA QUALITY CHECKS
- No gaps longer than 3 consecutive days
- Metric values within plausible ranges
- Consistent dimension values over time

---

END OF DOCUMENT
