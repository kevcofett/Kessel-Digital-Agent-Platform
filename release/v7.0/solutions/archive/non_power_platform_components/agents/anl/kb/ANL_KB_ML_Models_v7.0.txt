
ANL ML MODELS KNOWLEDGE BASE
VERSION 1.0
LAST UPDATED JANUARY 2026

---

OVERVIEW

This document describes the machine learning models available to the Analytics Agent for advanced calculations and predictions. These models provide higher accuracy than rule-based calculations for complex optimization and forecasting tasks.

---

AVAILABLE ML MODELS

BUDGET OPTIMIZATION MODEL
- Endpoint: kdap-budget-optimizer
- Purpose: Determine optimal budget allocation across channels
- Model Type: Gradient Boosting Regressor
- Input Features: Channel spends, historical ROAS, market competition, seasonality, brand awareness
- Output: Optimal allocation score (0-100) and recommended distribution
- When to Use: Budget exceeds $50,000 or involves 4+ channels
- Fallback: Use diminishing returns heuristics if ML unavailable

RESPONSE CURVE MODEL
- Endpoint: kdap-response-curve
- Purpose: Model diminishing returns for each channel
- Model Type: Polynomial Regression with saturation transform
- Input Features: Historical spend levels, conversion rates by spend tier
- Output: Response curve parameters (alpha, beta) and inflection points
- When to Use: Client has 6+ months historical data
- Fallback: Use industry benchmark curves

MONTE CARLO SIMULATION
- Endpoint: kdap-monte-carlo
- Purpose: Risk-adjusted budget scenario analysis
- Model Type: Monte Carlo simulation with 10,000 iterations
- Input Features: Expected values, variance estimates, correlation matrix
- Output: Probability distributions, confidence intervals, risk metrics
- When to Use: High-stakes decisions or volatile market conditions
- Fallback: Use deterministic sensitivity analysis

---

CALLING ML MODELS

The capability dispatcher automatically routes to ML endpoints when available. To explicitly request ML-powered calculations, include in your request:

- use_ml: true
- confidence_required: high

If ML endpoint is unavailable or returns error, the system automatically falls back to AI Builder prompts with equivalent functionality at slightly lower precision.

---

MODEL ACCURACY BENCHMARKS

BUDGET OPTIMIZER
- Training R2: 0.92
- Test R2: 0.89
- Cross-validation R2: 0.87 +/- 0.03

RESPONSE CURVE
- Training R2: 0.95
- Test R2: 0.91
- MAE: 2.3% of actual

MONTE CARLO
- Calibration score: 0.94
- Coverage probability: 95.2% (target 95%)

---

INTEGRATION WITH ANL CAPABILITIES

ANL_CALCULATE_OPTIMAL_ALLOCATION
- Primary: kdap-budget-optimizer ML endpoint
- Fallback: ANL_OPTIMAL_ALLOCATION_PROMPT AI Builder

ANL_MODEL_RESPONSE_CURVE
- Primary: kdap-response-curve ML endpoint
- Fallback: ANL_RESPONSE_CURVE_PROMPT AI Builder

ANL_RUN_MONTE_CARLO
- Primary: kdap-monte-carlo ML endpoint
- Fallback: ANL_MONTECARLO_PROMPT AI Builder

---

DATA REQUIREMENTS

For ML models to produce reliable results, ensure:

MINIMUM DATA VOLUME
- Budget optimizer: 3 months spend history
- Response curves: 6 months with spend variation
- Monte Carlo: Point estimates + variance for all inputs

DATA QUALITY CHECKS
- No missing values in required fields
- Spend values must be positive
- Conversion rates between 0 and 1
- Dates in chronological order

---

ERROR HANDLING

If ML endpoint returns error:

ERROR CODE ML_001: Model timeout
- Action: Retry once, then fallback to AI Builder

ERROR CODE ML_002: Invalid input schema
- Action: Validate inputs against schema, correct and retry

ERROR CODE ML_003: Model not deployed
- Action: Use AI Builder fallback immediately

ERROR CODE ML_004: Confidence below threshold
- Action: Return result with confidence warning

---

END OF DOCUMENT
